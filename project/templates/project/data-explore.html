{% extends './base-project.html' %}
{% load static %}
{% block content %}
    <section class="py-4 container">
        <div class="row py-lg-3">
            <div class="col">
                <div class="card">
                    <div class="card-body">
                        <div class="py-lg-3">
                            <h4 style="font-weight: 500;">
                                Explore Microearthquake Catalog in PT.{{site.name | upper}} Site Project
                            </h4>
                        </div>
                        <ul class="nav nav-tabs">
                            <li class="nav-item">
                                <button  class="nav-link active">
                                    Relocated Catalog
                                </button>
                            </li>
                            <li class="nav-item">
                                <button  class="nav-link">
                                    Initial Catalog
                                </button>
                            </li>
                        </ul>

                        <div class="tab-contents-tab">
                            <div class="tab-content active" id="tab-relocated">
                                <!-- Date range picker form -->
                                <form method="get" class="form-explorer py-lg-3">
                                    <h5> Explore events in specific date range</h5>
                                    <div class="filter-parameter">
                                        {{date_filter_relocated.form}} 
                                    </div>
                                    <button class="btn btn-primary" type = "submit">
                                        Filter
                                    </button>
                                </form> 
                                <div class="table-container">                    
                                    <table class="table table-striped" style="width:100%">
                                        <thead>
                                            <tr>
                                                <th>source_id</th>
                                                <th>source_latitude</th>
                                                <th>source_longitude</th>
                                                <th>source_depth_m</th>
                                                <th>source_origin_dt</th>
                                                <th>source_err_rms_s</th>
                                                <th>magnitude</th>
                                                <th>remarks</th>
                                            </tr>
                                        </thead>

                                        <tbody>
                                            {% for ev in table_relocated %}
                                                <tr >
                                                    <td>{{ev.source_id}}</td>
                                                    <td>{{ev.source_lat | floatformat:7}}</td>
                                                    <td>{{ev.source_lon | floatformat:7}}</td>
                                                    <td>{{ev.source_depth_m | floatformat:3}}</td>
                                                    <td>{{ev.source_origin_dt | date:"Y-m-d H:i:s.u"}}</td>
                                                    <td>{{ev.source_err_rms_s | floatformat:3}}</td>
                                                    <td>{{ev.magnitude | floatformat:3}}</td>
                                                    <td>{{ev.remarks}}</td>
                                                </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>

                                <div class="download-csv py-lg-3">
                                    <p>
                                        Or you can download the full catalog in csv file below
                                    </p>
                                    <a href="{% url 'download-relocated' site_slug=site.slug %}" class="btn btn-primary">
                                        Download full CSV
                                    </a>
                                </div>
                            </div>

                            <div class="tab-content" id="tab-initial">
                                <!-- Date range picker form -->
                                <form method="get" class="form-explorer py-lg-3">
                                    <h5> Explore events in specific date range</h5>
                                    <div class="filter-parameter">
                                        {{date_filter_initial.form}} 
                                    </div>
                                    <button class="btn btn-primary" type = "submit">
                                        Filter
                                    </button>
                                </form> 

                                <div class="table-container">                    
                                    <table class="table table-striped" style="width:100%">
                                        <thead>
                                            <tr>
                                                <th>source_id</th>
                                                <th>source_latitude</th>
                                                <th>source_longitude</th>
                                                <th>source_depth_m</th>
                                                <th>source_origin_dt</th>
                                                <th>source_error_rms_s</th>
                                                <th>magnitude</th>
                                                <th>remarks</th>
                                            </tr>
                                        </thead>

                                        <tbody>
                                            {% for ev in table_initial %}
                                                <tr >
                                                    <td>{{ev.source_id}}</td>
                                                    <td>{{ev.source_lat | floatformat:7}}</td>
                                                    <td>{{ev.source_lon | floatformat:7}}</td>
                                                    <td>{{ev.source_depth_m | floatformat:3}}</td>
                                                    <td>{{ev.source_origin_dt | date:"Y-m-d H:i:s.u"}}</td>
                                                    <td>{{ev.source_err_rms_s | floatformat:3}}</td>
                                                    <td>{{ev.magnitude | floatformat:3}}</td>
                                                    <td>{{ev.remarks}}</td>
                                                </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>  
                                <div class="download-csv py-lg-3">
                                    <p>
                                        Or you can download the full catalog in csv file below
                                    </p>
                                    <a href="{% url 'download-initial' site_slug=site.slug %}" class="btn btn-primary">
                                        Download full CSV
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
{% endblock %}
